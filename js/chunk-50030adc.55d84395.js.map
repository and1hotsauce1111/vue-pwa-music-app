{"version":3,"sources":["webpack:///./src/components/music-list/music-list.vue?219b","webpack:///./src/api/recommend.js","webpack:///./src/components/music-list/music-list.vue?965f","webpack:///src/components/music-list/music-list.vue","webpack:///./src/components/music-list/music-list.vue?ab3c","webpack:///./src/components/music-list/music-list.vue","webpack:///./src/components/disc/disc.vue?127f","webpack:///./src/components/disc/disc.vue?2b29","webpack:///src/components/disc/disc.vue","webpack:///./src/components/disc/disc.vue?a4c9","webpack:///./src/components/disc/disc.vue"],"names":["getRecommend","url","axios","get","params","commonParams","getSongList","pid","data","Object","assign","reqId","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","back","domProps","_s","title","ref","style","directives","name","rawName","value","songs","length","expression","random","_v","attrs","probeType","listenScroll","scroll","rank","selectItem","staticRenderFns","mixins","components","Scroll","SongList","Loading","props","bgImage","type","String","default","Array","songsNum","Number","Boolean","scrollY","computed","bgStyle","watch","$refs","layer","transform","newVal","scale","percent","zIndex","blur","Math","min","filter","backdrop","minTransalteY","paddingTop","height","playBtn","display","created","mounted","imageHeight","clientHeight","RESERVED_HEIGHT","list","$el","top","methods","randomPlay","selectPlay","pos","y","$router","handlePlaylist","bottom","refresh","component","MusicList","disc","img","_getSongList","id","push","_normalizeSongs","forEach","musicData","musicrid","albumid","ret"],"mappings":"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","file":"js/chunk-50030adc.55d84395.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=30aceb6e&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=30aceb6e&lang=stylus&scoped=true&\"","import axios from 'axios'\r\nimport { commonParams } from './config'\r\n\r\nexport function getRecommend() {\r\n  const url = '/api/pc/classify/playlist/getRcmPlayList'\r\n\r\n  return axios.get(url, {\r\n    params: commonParams\r\n  })\r\n}\r\n\r\nexport function getSongList(pid) {\r\n  const url = '/api/www/playlist/playListInfo'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    pid,\r\n    reqId: 'edfd4e30-bb75-11ea-9a13-1900244dcd2e'\r\n  })\r\n\r\n  return axios.get(url, {\r\n    params: data\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_c('h1',{staticClass:\"title\",domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{staticClass:\"play-wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.songs.length > 0),expression:\"songs.length > 0\"}],ref:\"playBtn\",staticClass:\"play\",on:{\"click\":_vm.random}},[_c('i',{staticClass:\"icon-play\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"隨機播放全部\")])])]),_c('div',{ref:\"filter\",staticClass:\"filter\"})]),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_c('scroll',{ref:\"list\",staticClass:\"list\",attrs:{\"probeType\":_vm.probeType,\"listen-scroll\":_vm.listenScroll,\"data\":_vm.songs},on:{\"scroll\":_vm.scroll}},[_c('div',{staticClass:\"song-list-wrapper\"},[_c('song-list',{attrs:{\"songs\":_vm.songs,\"rank\":_vm.rank},on:{\"select\":_vm.selectItem}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songs.length),expression:\"!songs.length\"}],staticClass:\"loading-container\"},[_c('loading')],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"back\" @click=\"back\">\r\n      <i class=\"icon-back\"></i>\r\n    </div>\r\n    <h1 class=\"title\" v-html=\"title\"></h1>\r\n    <div class=\"bg-image\" :style=\"bgStyle\" ref=\"bgImage\">\r\n      <div class=\"play-wrapper\">\r\n        <div class=\"play\" ref=\"playBtn\" v-show=\"songs.length > 0\" @click=\"random\">\r\n          <i class=\"icon-play\"></i>\r\n          <span class=\"text\">隨機播放全部</span>\r\n        </div>\r\n      </div>\r\n      <!-- 高斯模糊用 -->\r\n      <div class=\"filter\" ref=\"filter\"></div>\r\n    </div>\r\n    <!-- 隨滾動調整banner高度用 -->\r\n    <div class=\"bg-layer\" ref=\"layer\"></div>\r\n    <scroll\r\n      :probeType=\"probeType\"\r\n      :listen-scroll=\"listenScroll\"\r\n      :data=\"songs\"\r\n      class=\"list\"\r\n      ref=\"list\"\r\n      @scroll=\"scroll\"\r\n    >\r\n      <div class=\"song-list-wrapper\">\r\n        <song-list v-on:select=\"selectItem\" :songs=\"songs\" :rank=\"rank\"></song-list>\r\n      </div>\r\n      <div class=\"loading-container\" v-show=\"!songs.length\">\r\n        <loading />\r\n      </div>\r\n    </scroll>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascrip-6\">\r\nimport Scroll from 'base/scroll/scroll'\r\nimport SongList from 'base/song-list/song-list'\r\nimport Loading from 'base/loading/loading'\r\nimport { prefixStyle } from 'common/js/dom'\r\nimport { mapActions } from 'vuex'\r\nimport { playlistMixin } from 'common/js/mixin'\r\n\r\n// 滾動至最上方保留的背景圖高度 大約等於title area高度\r\nconst RESERVED_HEIGHT = 50\r\nconst transform = prefixStyle('transform')\r\nconst backdrop =\r\n  prefixStyle('backdrop-filter') === 'webkitBackdrop-filter'\r\n    ? 'backdrop-filter'\r\n    : prefixStyle('backdrop-filter')\r\n\r\nexport default {\r\n  mixins: [playlistMixin],\r\n  components: {\r\n    Scroll,\r\n    SongList,\r\n    Loading\r\n  },\r\n  props: {\r\n    bgImage: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    songs: {\r\n      type: Array,\r\n      default: function() {\r\n        return []\r\n      }\r\n    },\r\n    songsNum: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    rank: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      scrollY: 0\r\n    }\r\n  },\r\n  computed: {\r\n    bgStyle() {\r\n      return `background-image: url(${this.bgImage})`\r\n    }\r\n  },\r\n  watch: {\r\n    scrollY(newVal) {\r\n      // 最大滾動高度\r\n      let zIndex = 0\r\n      let scale = 1\r\n      let blur = 0\r\n      const translateY = Math.max(this.minTransalteY, newVal)\r\n      this.$refs.layer.style[transform] = `translate3d(0, ${translateY}px, 0)`\r\n\r\n      // 滾動超過邊界 banner圖片放大效果\r\n      const percent = Math.abs(newVal / this.imageHeight)\r\n      if (newVal > 0) {\r\n        scale = 1 + percent\r\n        zIndex = 10\r\n      } else {\r\n        blur = Math.min(20 * percent, 20)\r\n      }\r\n\r\n      // 背景圖模糊效果\r\n      this.$refs.filter.style[backdrop] = `blur(${blur}px)`\r\n\r\n      // 滾動為負值\r\n      if (newVal < this.minTransalteY) {\r\n        zIndex = 10\r\n        this.$refs.bgImage.style.paddingTop = 0\r\n        this.$refs.bgImage.style.height = `${RESERVED_HEIGHT}px`\r\n        this.$refs.playBtn.style.display = 'none'\r\n      } else {\r\n        this.$refs.bgImage.style.paddingTop = '70%'\r\n        this.$refs.bgImage.style.height = 0\r\n        this.$refs.playBtn.style.display = ''\r\n      }\r\n      this.$refs.bgImage.style.zIndex = zIndex\r\n      this.$refs.bgImage.style[transform] = `scale(${scale})`\r\n    }\r\n  },\r\n  created() {\r\n    this.probeType = 3\r\n    this.listenScroll = true\r\n  },\r\n  mounted() {\r\n    this.imageHeight = this.$refs.bgImage.clientHeight\r\n    this.minTransalteY = -this.imageHeight + RESERVED_HEIGHT\r\n    this.$refs.list.$el.style.top = `${this.$refs.bgImage.clientHeight}px`\r\n  },\r\n  methods: {\r\n    random() {\r\n      this.randomPlay({ list: this.songs })\r\n    },\r\n    selectItem(item, index) {\r\n      this.selectPlay({ list: this.songs, index })\r\n    },\r\n    scroll(pos) {\r\n      this.scrollY = pos.y\r\n    },\r\n    back() {\r\n      this.$router.back()\r\n    },\r\n    handlePlaylist(playlist) {\r\n      const bottom = playlist.length > 0 ? '60px' : 0\r\n      this.$refs.list.$el.style.bottom = bottom\r\n      this.$refs.list.refresh()\r\n    },\r\n    ...mapActions(['selectPlay', 'randomPlay'])\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~common/stylus/variable'\r\n@import '~common/stylus/mixin'\r\n\r\n.music-list\r\n  position fixed\r\n  z-index 100\r\n  top 0\r\n  left 0\r\n  bottom 0\r\n  right 0\r\n  background $color-background\r\n  .back\r\n    position absolute\r\n    top 0\r\n    left 6px\r\n    z-index 50\r\n    .icon-back\r\n      display block\r\n      padding 10px\r\n      font-size $font-size-large-x\r\n      color $color-theme\r\n  .title\r\n    position absolute\r\n    top 0\r\n    left 10%\r\n    z-index 40\r\n    width 80%\r\n    no-wrap()\r\n    text-align center\r\n    line-height 40px\r\n    font-size $font-size-large\r\n    color $color-text\r\n  .bg-image\r\n    position relative\r\n    width 100%\r\n    height 0\r\n    padding-top 70%\r\n    transform-origin top\r\n    background-size cover\r\n    .play-wrapper\r\n      position absolute\r\n      bottom 20px\r\n      z-index 50\r\n      width 100%\r\n      .play\r\n        box-sizing border-box\r\n        width 135px\r\n        padding 7px 0\r\n        margin 0 auto\r\n        text-align center\r\n        border 1px solid $color-theme\r\n        color $color-theme\r\n        border-radius 100px\r\n        font-size 0\r\n        .icon-play\r\n          display inline-block\r\n          vertical-align middle\r\n          margin-right 6px\r\n          font-size $font-size-medium-x\r\n        .text\r\n          display inline-block\r\n          vertical-align middle\r\n          font-size $font-size-small\r\n    .filter\r\n      position absolute\r\n      top 0\r\n      left 0\r\n      width 100%\r\n      height 100%\r\n      background rgba(7, 17, 27, 0.4)\r\n  .bg-layer\r\n    position relative\r\n    height 100%\r\n    background $color-background\r\n  .list\r\n    position fixed\r\n    top 0\r\n    bottom 0\r\n    width 100%\r\n    background $color-background\r\n    .song-list-wrapper\r\n      padding 20px 30px\r\n    .loading-container\r\n      position absolute\r\n      width 100%\r\n      top 50%\r\n      transform translateY(-50%)\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./music-list.vue?vue&type=template&id=30aceb6e&scoped=true&\"\nimport script from \"./music-list.vue?vue&type=script&lang=js&\"\nexport * from \"./music-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./music-list.vue?vue&type=style&index=0&id=30aceb6e&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30aceb6e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./disc.vue?vue&type=style&index=0&id=65161b93&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./disc.vue?vue&type=style&index=0&id=65161b93&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\",\"appear\":\"\"}},[_c('music-list',{attrs:{\"title\":_vm.title,\"bg-image\":_vm.bgImage,\"songs\":_vm.songs,\"songsNum\":_vm.songsNum}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition name=\"slide\" appear>\r\n    <music-list :title=\"title\" :bg-image=\"bgImage\" :songs=\"songs\" :songsNum=\"songsNum\"></music-list>\r\n  </transition>\r\n</template>\r\n\r\n<script type=\"ecmascript-6\">\r\nimport { mapGetters } from 'vuex'\r\nimport MusicList from 'components/music-list/music-list'\r\nimport { getSongList } from 'api/recommend'\r\nimport { ERR_OK } from 'api/config'\r\nimport { createSong } from 'common/js/song'\r\n\r\nexport default {\r\n  components: {\r\n    MusicList\r\n  },\r\n  data() {\r\n    return {\r\n      songs: [],\r\n      songsNum: 0\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['disc']),\r\n    title() {\r\n      return this.disc.name\r\n    },\r\n    bgImage() {\r\n      return this.disc.img\r\n    }\r\n  },\r\n  created() {\r\n    this._getSongList()\r\n  },\r\n  methods: {\r\n    _getSongList() {\r\n      // 重新整理無法獲取資料 重新導向\r\n      if (!this.disc.id) {\r\n        this.$router.push('/recommend')\r\n        return false\r\n      }\r\n      getSongList(this.disc.id)\r\n        .then(res => {\r\n          if (res.status === 200 && res.data.code === ERR_OK) {\r\n            const songList = res.data.data.musicList\r\n            this.songsNum = songList.length\r\n            this.songs = this._normalizeSongs(songList)\r\n          }\r\n        })\r\n        .catch(e => {\r\n          console.log(e)\r\n        })\r\n    },\r\n    _normalizeSongs(list) {\r\n      const ret = []\r\n      list.forEach(musicData => {\r\n        if (musicData.musicrid && musicData.albumid) {\r\n          ret.push(createSong(musicData))\r\n        }\r\n      })\r\n\r\n      return ret\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.slide-enter-active, .slide-leave-active\r\n  transition all 0.3s\r\n.slide-enter, .slide-leave-to\r\n  transform translate3d(100%, 0, 0)\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./disc.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./disc.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./disc.vue?vue&type=template&id=65161b93&scoped=true&\"\nimport script from \"./disc.vue?vue&type=script&lang=js&\"\nexport * from \"./disc.vue?vue&type=script&lang=js&\"\nimport style0 from \"./disc.vue?vue&type=style&index=0&id=65161b93&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"65161b93\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}